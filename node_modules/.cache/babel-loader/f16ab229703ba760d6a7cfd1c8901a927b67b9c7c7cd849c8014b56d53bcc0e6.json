{"ast":null,"code":"import _regeneratorRuntime from\"D:/Work/VB/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Work/VB/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{userRequest}from\"../requestMethods\";export var fetchWishlist=createAsyncThunk('wishlist/fetchWishlist',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userId){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return userRequest.get(\"wishlists/find/\".concat(userId),{withCredentials:true});case 2:res=_context.sent;return _context.abrupt(\"return\",res.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var saveNewWishlist=createAsyncThunk('wishlist/saveNewWishlist',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(wishlist){var newWishlist,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:newWishlist={wishlist:wishlist};_context2.prev=1;_context2.next=4;return userRequest.put(\"/\".concat(wishlist.id),{wishlist:newWishlist,withCredentials:true});case 4:res=_context2.sent;return _context2.abrupt(\"return\",res.data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}());var wishlistSlice=createSlice({name:'wishlist',initialState:{products:[],quantity:0,status:'idle',error:null},reducers:{addProduct:function addProduct(state,action){var _state$products;if(((_state$products=state.products)===null||_state$products===void 0?void 0:_state$products.length)>0){for(var i=0;i<state.products.length;i++){if(state.products[i]['_id']===action.payload._id){state.products[i].quantity+=action.payload.quantity;return;}}state.quantity+=1;state.products.push(action.payload);}else{state.quantity+=1;state.products.push(action.payload);}},deleteProduct:function deleteProduct(state,action){if(state.products.length>0){for(var i=0;i<state.products.length;i++){if(state.products[i]['_id']===action.payload._id){state.products.splice(i,1);state.quantity-=1;return;}}}},clearWishlist:function clearWishlist(state){state.products=[];state.quantity=0;state.totalPrice=0;state.status='cleared';}},extraReducers:function extraReducers(builder){builder.addCase(fetchWishlist.pending,function(state){state.status='loading';}).addCase(fetchWishlist.fulfilled,function(state,action){var _action$payload,_action$payload2,_action$payload3,_action$payload4,_state$products2;state.status='succeded';state.id=((_action$payload=action.payload)===null||_action$payload===void 0?void 0:_action$payload._id)||null;state.createdAt=((_action$payload2=action.payload)===null||_action$payload2===void 0?void 0:_action$payload2.createdAt)||null;state.updatedAt=((_action$payload3=action.payload)===null||_action$payload3===void 0?void 0:_action$payload3.updatedAt)||null;state.products=((_action$payload4=action.payload)===null||_action$payload4===void 0?void 0:_action$payload4.products)||[];state.quantity=((_state$products2=state.products)===null||_state$products2===void 0?void 0:_state$products2.length)||0;}).addCase(fetchWishlist.rejected,function(state,action){state.status='failed';state.error=action.error.message;}).addCase(saveNewWishlist.fulfilled,function(state,action){var _action$payload5,_action$payload6,_action$payload7,_action$payload8,_state$products3;state.status='succeded';state.id=((_action$payload5=action.payload)===null||_action$payload5===void 0?void 0:_action$payload5._id)||null;state.createdAt=((_action$payload6=action.payload)===null||_action$payload6===void 0?void 0:_action$payload6.createdAt)||null;state.updatedAt=((_action$payload7=action.payload)===null||_action$payload7===void 0?void 0:_action$payload7.updatedAt)||null;state.products=((_action$payload8=action.payload)===null||_action$payload8===void 0?void 0:_action$payload8.products)||[];state.quantity=((_state$products3=state.products)===null||_state$products3===void 0?void 0:_state$products3.length)||0;});}});var _wishlistSlice$action=wishlistSlice.actions,addProduct=_wishlistSlice$action.addProduct,deleteProduct=_wishlistSlice$action.deleteProduct,clearWishlist=_wishlistSlice$action.clearWishlist;export{addProduct,deleteProduct,clearWishlist};export default wishlistSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","userRequest","fetchWishlist","userId","get","withCredentials","res","data","saveNewWishlist","wishlist","newWishlist","put","id","console","log","wishlistSlice","name","initialState","products","quantity","status","error","reducers","addProduct","state","action","length","i","payload","_id","push","deleteProduct","splice","clearWishlist","totalPrice","extraReducers","builder","addCase","pending","fulfilled","createdAt","updatedAt","rejected","message","actions","reducer"],"sources":["D:/Work/VB/client/src/redux/wishlistRedux.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { userRequest } from \"../requestMethods\";\r\n\r\n\r\nexport const fetchWishlist = createAsyncThunk('wishlist/fetchWishlist', async (userId) => {\r\n    const res = await userRequest.get(`wishlists/find/${userId}`, {\r\n        withCredentials: true\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const saveNewWishlist = createAsyncThunk('wishlist/saveNewWishlist', async wishlist => {\r\n    const newWishlist = { wishlist }\r\n    try {\r\n        const res = await userRequest.put(`/${wishlist.id}`, { \r\n            wishlist: newWishlist,\r\n            withCredentials: true\r\n        })\r\n        return res.data;\r\n    } catch(err) {\r\n        console.log(err)\r\n    }\r\n})\r\n\r\nconst wishlistSlice = createSlice({\r\n    name: 'wishlist',\r\n    initialState: {\r\n        products: [],\r\n        quantity: 0,\r\n        status: 'idle',\r\n        error: null  \r\n    },\r\n    reducers: {\r\n        addProduct: (state, action) => {\r\n            if (state.products?.length > 0) {\r\n                for (let i = 0; i < state.products.length; i++) {\r\n                    if (state.products[i]['_id'] === action.payload._id) {\r\n                        state.products[i].quantity += action.payload.quantity;\r\n                        return\r\n                    } \r\n                }\r\n                state.quantity += 1;\r\n                state.products.push(action.payload);              \r\n            } else {\r\n                state.quantity += 1;\r\n                state.products.push(action.payload);\r\n            }\r\n        },\r\n        deleteProduct: (state, action) => {\r\n            if (state.products.length > 0) {\r\n                for (let i = 0; i < state.products.length; i++) {\r\n                    if (state.products[i]['_id'] === action.payload._id) {\r\n                        state.products.splice(i, 1);\r\n                        state.quantity -= 1;    \r\n                        return\r\n                    } \r\n                }        \r\n            }\r\n        },\r\n        clearWishlist: (state) => {\r\n            state.products = [];\r\n            state.quantity = 0;\r\n            state.totalPrice = 0;\r\n            state.status = 'cleared';\r\n        }\r\n    },\r\n    extraReducers(builder) {\r\n        builder\r\n            .addCase(fetchWishlist.pending, (state) => {\r\n                state.status = 'loading';\r\n            })\r\n            .addCase(fetchWishlist.fulfilled, (state, action) => {\r\n                state.status = 'succeded';\r\n                state.id = action.payload?._id || null;\r\n                state.createdAt = action.payload?.createdAt || null;\r\n                state.updatedAt = action.payload?.updatedAt || null;\r\n                state.products = action.payload?.products || [];\r\n                state.quantity = state.products?.length || 0;\r\n            })\r\n            .addCase(fetchWishlist.rejected, (state, action) => {\r\n                state.status = 'failed';\r\n                state.error = action.error.message;\r\n            })\r\n            .addCase(saveNewWishlist.fulfilled, (state, action) => {\r\n                state.status = 'succeded';\r\n                state.id = action.payload?._id || null;\r\n                state.createdAt = action.payload?.createdAt || null;\r\n                state.updatedAt = action.payload?.updatedAt || null;\r\n                state.products = action.payload?.products || [];\r\n                state.quantity = state.products?.length || 0;\r\n            })\r\n    },\r\n});\r\n\r\nexport const { addProduct, deleteProduct, clearWishlist } = wishlistSlice.actions;\r\nexport default wishlistSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}