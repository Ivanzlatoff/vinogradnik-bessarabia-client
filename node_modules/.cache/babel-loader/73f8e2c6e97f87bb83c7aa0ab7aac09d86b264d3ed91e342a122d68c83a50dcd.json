{"ast":null,"code":"import axios from \"axios\";\nimport { publicRequest, userRequest } from \"../requestMethods\";\nimport { clearCart } from \"./cartRedux\";\nimport { loginFailure, loginStart, loginSuccess, refreshTokenStart, refreshTokenSuccess, refreshTokenFailure, logoutStart, logoutSuccess, logoutFailure } from \"./userRedux\";\nimport { clearWishlist } from \"./wishlistRedux\";\nimport { toast } from 'react-hot-toast';\nexport const refreshToken = async (dispatch, user) => {\n  // dispatch(refreshTokenStart())\n  try {\n    const res = await axios.post(\"/refresh_token\", {\n      token: user.refreshToken\n    });\n    dispatch(refreshTokenSuccess(res.data));\n    return res.data;\n  } catch (err) {\n    // dispatch(refreshTokenFailure());\n  }\n};\nexport const login = async (dispatch, user) => {\n  dispatch(loginStart());\n  try {\n    const res = await publicRequest.post(\"/auth/login\", user);\n    dispatch(loginSuccess(res.data));\n  } catch (err) {\n    dispatch(loginFailure());\n    toast.error(err.response.data.error);\n  }\n};\nexport const logout = async (dispatch, user) => {\n  dispatch(logoutStart());\n  try {\n    const res = await userRequest.delete(\"/auth/logout\", user);\n    res && dispatch(logoutSuccess());\n    res && dispatch(clearCart());\n    res && dispatch(clearWishlist());\n    // res && localStorage.clear();\n  } catch (err) {\n    console.log(err);\n    dispatch(logoutFailure());\n  }\n};","map":{"version":3,"names":["axios","publicRequest","userRequest","clearCart","loginFailure","loginStart","loginSuccess","refreshTokenStart","refreshTokenSuccess","refreshTokenFailure","logoutStart","logoutSuccess","logoutFailure","clearWishlist","toast","refreshToken","dispatch","user","res","post","token","data","err","login","error","response","logout","delete","console","log"],"sources":["D:/Work/vinogradnik/client/src/redux/apiCalls.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { publicRequest, userRequest } from \"../requestMethods\";\r\nimport { clearCart } from \"./cartRedux\";\r\nimport { \r\n    loginFailure, \r\n    loginStart, \r\n    loginSuccess, \r\n    refreshTokenStart,\r\n    refreshTokenSuccess,\r\n    refreshTokenFailure,\r\n    logoutStart, \r\n    logoutSuccess, \r\n    logoutFailure \r\n} from \"./userRedux\"\r\nimport { clearWishlist } from \"./wishlistRedux\";\r\nimport { toast } from 'react-hot-toast';\r\n\r\nexport const refreshToken = async (dispatch, user) => {\r\n    // dispatch(refreshTokenStart())\r\n    try {\r\n        const res = await axios.post(\"/refresh_token\", { token: user.refreshToken });\r\n        dispatch(refreshTokenSuccess(res.data));\r\n        return res.data\r\n    } catch(err) {\r\n        // dispatch(refreshTokenFailure());\r\n    }\r\n};\r\n\r\nexport const login = async (dispatch, user) => {\r\n    dispatch(loginStart());\r\n    try {\r\n        const res = await publicRequest.post(\"/auth/login\", user)\r\n        dispatch(loginSuccess(res.data))\r\n    } catch(err) {\r\n        dispatch(loginFailure());\r\n        toast.error(err.response.data.error);\r\n    }\r\n};\r\n\r\nexport const logout = async (dispatch, user) => {\r\n    dispatch(logoutStart());\r\n    try {\r\n        const res = await userRequest.delete(\"/auth/logout\", user);\r\n        res && dispatch(logoutSuccess());\r\n        res && dispatch(clearCart());\r\n        res && dispatch(clearWishlist());\r\n        // res && localStorage.clear();\r\n    } catch(err) {\r\n        console.log(err);\r\n        dispatch(logoutFailure());\r\n    }\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,EAAEC,WAAW,QAAQ,mBAAmB;AAC9D,SAASC,SAAS,QAAQ,aAAa;AACvC,SACIC,YAAY,EACZC,UAAU,EACVC,YAAY,EACZC,iBAAiB,EACjBC,mBAAmB,EACnBC,mBAAmB,EACnBC,WAAW,EACXC,aAAa,EACbC,aAAa,QACV,aAAa;AACpB,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,SAASC,KAAK,QAAQ,iBAAiB;AAEvC,OAAO,MAAMC,YAAY,GAAG,OAAOC,QAAQ,EAAEC,IAAI,KAAK;EAClD;EACA,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMlB,KAAK,CAACmB,IAAI,CAAC,gBAAgB,EAAE;MAAEC,KAAK,EAAEH,IAAI,CAACF;IAAa,CAAC,CAAC;IAC5EC,QAAQ,CAACR,mBAAmB,CAACU,GAAG,CAACG,IAAI,CAAC,CAAC;IACvC,OAAOH,GAAG,CAACG,IAAI;EACnB,CAAC,CAAC,OAAMC,GAAG,EAAE;IACT;EAAA;AAER,CAAC;AAED,OAAO,MAAMC,KAAK,GAAG,OAAOP,QAAQ,EAAEC,IAAI,KAAK;EAC3CD,QAAQ,CAACX,UAAU,EAAE,CAAC;EACtB,IAAI;IACA,MAAMa,GAAG,GAAG,MAAMjB,aAAa,CAACkB,IAAI,CAAC,aAAa,EAAEF,IAAI,CAAC;IACzDD,QAAQ,CAACV,YAAY,CAACY,GAAG,CAACG,IAAI,CAAC,CAAC;EACpC,CAAC,CAAC,OAAMC,GAAG,EAAE;IACTN,QAAQ,CAACZ,YAAY,EAAE,CAAC;IACxBU,KAAK,CAACU,KAAK,CAACF,GAAG,CAACG,QAAQ,CAACJ,IAAI,CAACG,KAAK,CAAC;EACxC;AACJ,CAAC;AAED,OAAO,MAAME,MAAM,GAAG,OAAOV,QAAQ,EAAEC,IAAI,KAAK;EAC5CD,QAAQ,CAACN,WAAW,EAAE,CAAC;EACvB,IAAI;IACA,MAAMQ,GAAG,GAAG,MAAMhB,WAAW,CAACyB,MAAM,CAAC,cAAc,EAAEV,IAAI,CAAC;IAC1DC,GAAG,IAAIF,QAAQ,CAACL,aAAa,EAAE,CAAC;IAChCO,GAAG,IAAIF,QAAQ,CAACb,SAAS,EAAE,CAAC;IAC5Be,GAAG,IAAIF,QAAQ,CAACH,aAAa,EAAE,CAAC;IAChC;EACJ,CAAC,CAAC,OAAMS,GAAG,EAAE;IACTM,OAAO,CAACC,GAAG,CAACP,GAAG,CAAC;IAChBN,QAAQ,CAACJ,aAAa,EAAE,CAAC;EAC7B;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}