{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { userRequest } from \"../requestMethods\";\nexport const fetchWishlist = createAsyncThunk('wishlist/fetchWishlist', async userId => {\n  const res = await userRequest.get(`wishlists/find/${userId}`, {\n    withCredentials: true\n  });\n  return res.data;\n});\nexport const saveNewWishlist = createAsyncThunk('wishlist/saveNewWishlist', async wishlist => {\n  const newWishlist = {\n    wishlist\n  };\n  try {\n    const res = await userRequest.put(`/${wishlist.id}`, {\n      wishlist: newWishlist,\n      withCredentials: true\n    });\n    return res.data;\n  } catch (err) {\n    console.log(err);\n  }\n});\nconst wishlistSlice = createSlice({\n  name: 'wishlist',\n  initialState: {\n    products: [],\n    quantity: 0,\n    status: 'idle',\n    error: null\n  },\n  reducers: {\n    addProduct: (state, action) => {\n      var _state$products;\n      if (((_state$products = state.products) === null || _state$products === void 0 ? void 0 : _state$products.length) > 0) {\n        for (let i = 0; i < state.products.length; i++) {\n          if (state.products[i]['_id'] === action.payload._id) {\n            state.products[i].quantity += action.payload.quantity;\n            return;\n          }\n        }\n        state.quantity += 1;\n        state.products.push(action.payload);\n      } else {\n        state.quantity += 1;\n        state.products.push(action.payload);\n      }\n    },\n    deleteProduct: (state, action) => {\n      if (state.products.length > 0) {\n        for (let i = 0; i < state.products.length; i++) {\n          if (state.products[i]['_id'] === action.payload._id) {\n            state.products.splice(i, 1);\n            state.quantity -= 1;\n            return;\n          }\n        }\n      }\n    },\n    clearWishlist: state => {\n      state.products = [];\n      state.quantity = 0;\n      state.totalPrice = 0;\n      state.status = 'cleared';\n    }\n  },\n  extraReducers(builder) {\n    builder.addCase(fetchWishlist.pending, state => {\n      state.status = 'loading';\n    }).addCase(fetchWishlist.fulfilled, (state, action) => {\n      var _action$payload, _action$payload2, _action$payload3, _action$payload4, _state$products2;\n      state.status = 'succeded';\n      state.id = ((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload._id) || null;\n      state.createdAt = ((_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.createdAt) || null;\n      state.updatedAt = ((_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.updatedAt) || null;\n      state.products = ((_action$payload4 = action.payload) === null || _action$payload4 === void 0 ? void 0 : _action$payload4.products) || [];\n      state.quantity = ((_state$products2 = state.products) === null || _state$products2 === void 0 ? void 0 : _state$products2.length) || 0;\n    }).addCase(fetchWishlist.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    }).addCase(saveNewWishlist.fulfilled, (state, action) => {\n      var _action$payload5, _action$payload6, _action$payload7, _action$payload8, _state$products3;\n      state.status = 'succeded';\n      state.id = ((_action$payload5 = action.payload) === null || _action$payload5 === void 0 ? void 0 : _action$payload5._id) || null;\n      state.createdAt = ((_action$payload6 = action.payload) === null || _action$payload6 === void 0 ? void 0 : _action$payload6.createdAt) || null;\n      state.updatedAt = ((_action$payload7 = action.payload) === null || _action$payload7 === void 0 ? void 0 : _action$payload7.updatedAt) || null;\n      state.products = ((_action$payload8 = action.payload) === null || _action$payload8 === void 0 ? void 0 : _action$payload8.products) || [];\n      state.quantity = ((_state$products3 = state.products) === null || _state$products3 === void 0 ? void 0 : _state$products3.length) || 0;\n    });\n  }\n});\nexport const {\n  addProduct,\n  deleteProduct,\n  clearWishlist\n} = wishlistSlice.actions;\nexport default wishlistSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","userRequest","fetchWishlist","userId","res","get","withCredentials","data","saveNewWishlist","wishlist","newWishlist","put","id","err","console","log","wishlistSlice","name","initialState","products","quantity","status","error","reducers","addProduct","state","action","_state$products","length","i","payload","_id","push","deleteProduct","splice","clearWishlist","totalPrice","extraReducers","builder","addCase","pending","fulfilled","_action$payload","_action$payload2","_action$payload3","_action$payload4","_state$products2","createdAt","updatedAt","rejected","message","_action$payload5","_action$payload6","_action$payload7","_action$payload8","_state$products3","actions","reducer"],"sources":["D:/Work/VB/client/src/redux/wishlistRedux.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { userRequest } from \"../requestMethods\";\r\n\r\n\r\nexport const fetchWishlist = createAsyncThunk('wishlist/fetchWishlist', async (userId) => {\r\n    const res = await userRequest.get(`wishlists/find/${userId}`, {\r\n        withCredentials: true\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const saveNewWishlist = createAsyncThunk('wishlist/saveNewWishlist', async wishlist => {\r\n    const newWishlist = { wishlist }\r\n    try {\r\n        const res = await userRequest.put(`/${wishlist.id}`, { \r\n            wishlist: newWishlist,\r\n            withCredentials: true\r\n        })\r\n        return res.data;\r\n    } catch(err) {\r\n        console.log(err)\r\n    }\r\n})\r\n\r\nconst wishlistSlice = createSlice({\r\n    name: 'wishlist',\r\n    initialState: {\r\n        products: [],\r\n        quantity: 0,\r\n        status: 'idle',\r\n        error: null  \r\n    },\r\n    reducers: {\r\n        addProduct: (state, action) => {\r\n            if (state.products?.length > 0) {\r\n                for (let i = 0; i < state.products.length; i++) {\r\n                    if (state.products[i]['_id'] === action.payload._id) {\r\n                        state.products[i].quantity += action.payload.quantity;\r\n                        return\r\n                    } \r\n                }\r\n                state.quantity += 1;\r\n                state.products.push(action.payload);              \r\n            } else {\r\n                state.quantity += 1;\r\n                state.products.push(action.payload);\r\n            }\r\n        },\r\n        deleteProduct: (state, action) => {\r\n            if (state.products.length > 0) {\r\n                for (let i = 0; i < state.products.length; i++) {\r\n                    if (state.products[i]['_id'] === action.payload._id) {\r\n                        state.products.splice(i, 1);\r\n                        state.quantity -= 1;    \r\n                        return\r\n                    } \r\n                }        \r\n            }\r\n        },\r\n        clearWishlist: (state) => {\r\n            state.products = [];\r\n            state.quantity = 0;\r\n            state.totalPrice = 0;\r\n            state.status = 'cleared';\r\n        }\r\n    },\r\n    extraReducers(builder) {\r\n        builder\r\n            .addCase(fetchWishlist.pending, (state) => {\r\n                state.status = 'loading';\r\n            })\r\n            .addCase(fetchWishlist.fulfilled, (state, action) => {\r\n                state.status = 'succeded';\r\n                state.id = action.payload?._id || null;\r\n                state.createdAt = action.payload?.createdAt || null;\r\n                state.updatedAt = action.payload?.updatedAt || null;\r\n                state.products = action.payload?.products || [];\r\n                state.quantity = state.products?.length || 0;\r\n            })\r\n            .addCase(fetchWishlist.rejected, (state, action) => {\r\n                state.status = 'failed';\r\n                state.error = action.error.message;\r\n            })\r\n            .addCase(saveNewWishlist.fulfilled, (state, action) => {\r\n                state.status = 'succeded';\r\n                state.id = action.payload?._id || null;\r\n                state.createdAt = action.payload?.createdAt || null;\r\n                state.updatedAt = action.payload?.updatedAt || null;\r\n                state.products = action.payload?.products || [];\r\n                state.quantity = state.products?.length || 0;\r\n            })\r\n    },\r\n});\r\n\r\nexport const { addProduct, deleteProduct, clearWishlist } = wishlistSlice.actions;\r\nexport default wishlistSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}