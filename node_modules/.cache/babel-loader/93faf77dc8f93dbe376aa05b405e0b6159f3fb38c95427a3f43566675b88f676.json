{"ast":null,"code":"var _localStorage;import{createApi,fetchBaseQuery}from'@reduxjs/toolkit/query/react';var TOKEN;if(!((_localStorage=localStorage)!==null&&_localStorage!==void 0&&_localStorage.getItem(\"persist:root\"))){TOKEN={};}else{var _JSON$parse,_JSON$parse$currentUs,_JSON$parse2,_localStorage2;TOKEN=(_JSON$parse=JSON.parse((_JSON$parse2=JSON.parse((_localStorage2=localStorage)===null||_localStorage2===void 0?void 0:_localStorage2.getItem(\"persist:root\")))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.user))===null||_JSON$parse===void 0?void 0:(_JSON$parse$currentUs=_JSON$parse.currentUser)===null||_JSON$parse$currentUs===void 0?void 0:_JSON$parse$currentUs.accessToken;}export var apiSlice=createApi({reducerPath:'api',baseQuery:fetchBaseQuery({baseUrl:'http://localhost:5000/api/',prepareHeaders:function prepareHeaders(headers){if(TOKEN){headers.set('token',\"Bearer \".concat(TOKEN));};return headers;}}),endpoints:function endpoints(builder){return{getCart:builder.query({query:function query(userId){return\"carts/find/\".concat(userId);}}),createCart:builder.mutation({query:function query(newCart){return{url:'carts',method:'POST',body:newCart};}}),updateCart:builder.mutation({query:function query(updatedCart){return{url:\"carts/\".concat(updatedCart.id),method:'PUT',body:updatedCart};}})};}});var useGetCartQuery=apiSlice.useGetCartQuery,useCreateCartMutation=apiSlice.useCreateCartMutation,useUpdateCartMutation=apiSlice.useUpdateCartMutation;export{useGetCartQuery,useCreateCartMutation,useUpdateCartMutation};","map":{"version":3,"names":["createApi","fetchBaseQuery","TOKEN","localStorage","getItem","JSON","parse","user","currentUser","accessToken","apiSlice","reducerPath","baseQuery","baseUrl","prepareHeaders","headers","set","endpoints","builder","getCart","query","userId","createCart","mutation","newCart","url","method","body","updateCart","updatedCart","id","useGetCartQuery","useCreateCartMutation","useUpdateCartMutation"],"sources":["D:/Work/VB/client/src/redux/apiSlice.js"],"sourcesContent":["import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n\r\n\r\nlet TOKEN\r\nif (!localStorage?.getItem(\"persist:root\")) {\r\n    TOKEN = {}\r\n} else {\r\n    TOKEN = JSON.parse(JSON.parse(localStorage?.getItem(\"persist:root\"))?.user)?.currentUser?.accessToken;\r\n}\r\n\r\nexport const apiSlice = createApi({\r\n    reducerPath: 'api',\r\n    baseQuery: fetchBaseQuery({ \r\n        baseUrl: 'http://localhost:5000/api/',\r\n        prepareHeaders: (headers) => {\r\n            if (TOKEN) {\r\n                headers.set('token', `Bearer ${TOKEN}`)\r\n            };\r\n            return headers\r\n        },\r\n    }),\r\n    endpoints: builder => ({\r\n        getCart: builder.query({\r\n            query: (userId) => `carts/find/${userId}`\r\n        }),\r\n        createCart: builder.mutation({\r\n            query: (newCart) => ({\r\n                url: 'carts',\r\n                method: 'POST',\r\n                body: newCart               \r\n            })\r\n        }),\r\n        updateCart: builder.mutation({\r\n            query: (updatedCart) => ({\r\n                url: `carts/${updatedCart.id}`,\r\n                method: 'PUT',\r\n                body: updatedCart\r\n            })\r\n        })\r\n    })\r\n});\r\n\r\nexport const { \r\n    useGetCartQuery,\r\n    useCreateCartMutation,\r\n    useUpdateCartMutation\r\n} = apiSlice;"],"mappings":"kBAAA,OAASA,SAAS,CAAEC,cAAc,KAAQ,8BAA8B,CAGxE,GAAIC,MAAK,CACT,GAAI,iBAACC,YAAY,kCAAZ,cAAcC,OAAO,CAAC,cAAc,CAAC,EAAE,CACxCF,KAAK,CAAG,CAAC,CAAC,CACd,CAAC,IAAM,mEACHA,KAAK,cAAGG,IAAI,CAACC,KAAK,eAACD,IAAI,CAACC,KAAK,iBAACH,YAAY,yCAAZ,eAAcC,OAAO,CAAC,cAAc,CAAC,CAAC,uCAAjD,aAAmDG,IAAI,CAAC,6DAAnE,YAAqEC,WAAW,gDAAhF,sBAAkFC,WAAW,CACzG,CAEA,MAAO,IAAMC,SAAQ,CAAGV,SAAS,CAAC,CAC9BW,WAAW,CAAE,KAAK,CAClBC,SAAS,CAAEX,cAAc,CAAC,CACtBY,OAAO,CAAE,4BAA4B,CACrCC,cAAc,CAAE,wBAACC,OAAO,CAAK,CACzB,GAAIb,KAAK,CAAE,CACPa,OAAO,CAACC,GAAG,CAAC,OAAO,kBAAYd,KAAK,EAAG,CAC3C,CAAC,CACD,MAAOa,QAAO,CAClB,CACJ,CAAC,CAAC,CACFE,SAAS,CAAE,mBAAAC,OAAO,QAAK,CACnBC,OAAO,CAAED,OAAO,CAACE,KAAK,CAAC,CACnBA,KAAK,CAAE,eAACC,MAAM,6BAAmBA,MAAM,GAC3C,CAAC,CAAC,CACFC,UAAU,CAAEJ,OAAO,CAACK,QAAQ,CAAC,CACzBH,KAAK,CAAE,eAACI,OAAO,QAAM,CACjBC,GAAG,CAAE,OAAO,CACZC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEH,OACV,CAAC,EACL,CAAC,CAAC,CACFI,UAAU,CAAEV,OAAO,CAACK,QAAQ,CAAC,CACzBH,KAAK,CAAE,eAACS,WAAW,QAAM,CACrBJ,GAAG,iBAAWI,WAAW,CAACC,EAAE,CAAE,CAC9BJ,MAAM,CAAE,KAAK,CACbC,IAAI,CAAEE,WACV,CAAC,EACL,CAAC,CACL,CAAC,EACL,CAAC,CAAC,CAEK,GACHE,gBAAe,CAGfrB,QAAQ,CAHRqB,eAAe,CACfC,qBAAqB,CAErBtB,QAAQ,CAFRsB,qBAAqB,CACrBC,qBAAqB,CACrBvB,QAAQ,CADRuB,qBAAqB,CACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}