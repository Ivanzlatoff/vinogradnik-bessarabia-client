{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\vinogradnik\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport './App.css';\nimport Home from './pages/Home';\nimport ProductList from './pages/ProductList';\nimport Product from './pages/Product';\nimport Register from './pages/Register';\nimport Login from './pages/Login';\nimport Cart from './pages/Cart';\nimport Wishlist from './pages/Wishlist';\nimport Search from './pages/Search';\nimport Success from './pages/Success';\nimport { Toaster } from 'react-hot-toast';\nimport { useSelector } from \"react-redux\";\nimport { refreshToken } from \"./redux/apiCalls\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from \"axios\";\nimport React, { Suspense, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const user = useSelector(state => state.user.currentUser);\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  useEffect(() => {\n    const lng = navigator.language;\n    i18n.changeLanguage(lng);\n  }, []);\n  const lng = navigator.language;\n  axios.interceptors.request.use(async config => {\n    let currentDate = new Date();\n    const decodedToken = jwt_decode(user.accessToken);\n    if (decodedToken.exp * 1000 < currentDate.getTime()) {\n      const data = await refreshToken();\n      console.log(data);\n      config.headers[\"token\"] = \"Bearer \" + data.accessToken;\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n  return (\n    /*#__PURE__*/\n    // <Suspense fallback={<div>Loading...</div>}>\n    //   <Router>\n    //     <Routes>\n    //       <Route exact path=\"/\" element={<Home />} />\n    //       <Route path=\"/products/:category\" element={<ProductList />} />\n    //       <Route path=\"/product/:id\" element={<Product />} />\n    //       <Route path=\"/product_search/:type\" element={<Search />} />\n    //       <Route path=\"/cart\" element={<Cart />} />\n    //       <Route path=\"/wishlist\" element={<Wishlist />} />\n    //       <Route path=\"/success\" element={<Success />} />\n    //       <Route path=\"/login\" element={user ? <Navigate  to=\"/\" /> : <Login />} />\n    //       <Route path=\"/register\" element={user ? <Navigate  to=\"/\" /> : <Register />} />\n    //       <Route path=\"/logout\" element={<Navigate to=\"/\" />} />\n    //     </Routes>\n    //     <Toaster />\n    //   </Router>\n    // </Suspense>\n    _jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: t('greeting.hello')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Browser Language: \", lng]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(App, \"oDPB+Myn9Tysz6nbufYNrWSVVWo=\", false, function () {\n  return [useSelector, useTranslation];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["BrowserRouter","Router","Routes","Route","Navigate","Home","ProductList","Product","Register","Login","Cart","Wishlist","Search","Success","Toaster","useSelector","refreshToken","jwt_decode","axios","React","Suspense","useEffect","useTranslation","App","user","state","currentUser","t","i18n","lng","navigator","language","changeLanguage","interceptors","request","use","config","currentDate","Date","decodedToken","accessToken","exp","getTime","data","console","log","headers","error","Promise","reject"],"sources":["D:/Work/vinogradnik/client/src/App.js"],"sourcesContent":["import {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Navigate \n} from \"react-router-dom\";\nimport './App.css';\nimport Home from './pages/Home';\nimport ProductList from './pages/ProductList';\nimport Product from './pages/Product';\nimport Register from './pages/Register';\nimport Login from './pages/Login';\nimport Cart from './pages/Cart';\nimport Wishlist from './pages/Wishlist';\nimport Search from './pages/Search';\nimport Success from './pages/Success';\nimport { Toaster } from 'react-hot-toast';\nimport { useSelector } from \"react-redux\";\nimport { refreshToken } from \"./redux/apiCalls\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from \"axios\";\nimport React, { Suspense, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\n\nconst App = () => {\n  const user = useSelector(state => state.user.currentUser);\n  const { t, i18n } = useTranslation();\n\n  useEffect(() => {\n    const lng = navigator.language;\n    i18n.changeLanguage(lng);\n  }, []);\n\n  const lng = navigator.language;\n\n  axios.interceptors.request.use(\n    async (config) => {\n      let currentDate = new Date();\n      const decodedToken = jwt_decode(user.accessToken);\n      if (decodedToken.exp * 1000 < currentDate.getTime()) {\n        const data = await refreshToken()\n        console.log(data);\n        config.headers[\"token\"] = \"Bearer \" + data.accessToken;\n      }\n      return config;\n    }, (error) => {\n      return Promise.reject(error);\n    }\n  );\n\n  return (\n    // <Suspense fallback={<div>Loading...</div>}>\n    //   <Router>\n    //     <Routes>\n    //       <Route exact path=\"/\" element={<Home />} />\n    //       <Route path=\"/products/:category\" element={<ProductList />} />\n    //       <Route path=\"/product/:id\" element={<Product />} />\n    //       <Route path=\"/product_search/:type\" element={<Search />} />\n    //       <Route path=\"/cart\" element={<Cart />} />\n    //       <Route path=\"/wishlist\" element={<Wishlist />} />\n    //       <Route path=\"/success\" element={<Success />} />\n    //       <Route path=\"/login\" element={user ? <Navigate  to=\"/\" /> : <Login />} />\n    //       <Route path=\"/register\" element={user ? <Navigate  to=\"/\" /> : <Register />} />\n    //       <Route path=\"/logout\" element={<Navigate to=\"/\" />} />\n    //     </Routes>\n    //     <Toaster />\n    //   </Router>\n    // </Suspense>\n    <div>\n      <h2>\n        {t('greeting.hello')}\n      </h2>\n      <span>\n        Browser Language: {lng}\n      </span>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":";;AAAA,SACEA,aAAa,IAAIC,MAAM,EACvBC,MAAM,EACNC,KAAK,EACLC,QAAQ,QACH,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAOC,IAAI,MAAM,cAAc;AAC/B,OAAOC,WAAW,MAAM,qBAAqB;AAC7C,OAAOC,OAAO,MAAM,iBAAiB;AACrC,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,KAAK,MAAM,eAAe;AACjC,OAAOC,IAAI,MAAM,cAAc;AAC/B,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,MAAM,MAAM,gBAAgB;AACnC,OAAOC,OAAO,MAAM,iBAAiB;AACrC,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,YAAY,QAAQ,kBAAkB;AAC/C,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,cAAc,QAAQ,eAAe;AAAC;AAG/C,MAAMC,GAAG,GAAG,MAAM;EAAA;EAChB,MAAMC,IAAI,GAAGT,WAAW,CAACU,KAAK,IAAIA,KAAK,CAACD,IAAI,CAACE,WAAW,CAAC;EACzD,MAAM;IAAEC,CAAC;IAAEC;EAAK,CAAC,GAAGN,cAAc,EAAE;EAEpCD,SAAS,CAAC,MAAM;IACd,MAAMQ,GAAG,GAAGC,SAAS,CAACC,QAAQ;IAC9BH,IAAI,CAACI,cAAc,CAACH,GAAG,CAAC;EAC1B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,GAAG,GAAGC,SAAS,CAACC,QAAQ;EAE9Bb,KAAK,CAACe,YAAY,CAACC,OAAO,CAACC,GAAG,CAC5B,MAAOC,MAAM,IAAK;IAChB,IAAIC,WAAW,GAAG,IAAIC,IAAI,EAAE;IAC5B,MAAMC,YAAY,GAAGtB,UAAU,CAACO,IAAI,CAACgB,WAAW,CAAC;IACjD,IAAID,YAAY,CAACE,GAAG,GAAG,IAAI,GAAGJ,WAAW,CAACK,OAAO,EAAE,EAAE;MACnD,MAAMC,IAAI,GAAG,MAAM3B,YAAY,EAAE;MACjC4B,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;MACjBP,MAAM,CAACU,OAAO,CAAC,OAAO,CAAC,GAAG,SAAS,GAAGH,IAAI,CAACH,WAAW;IACxD;IACA,OAAOJ,MAAM;EACf,CAAC,EAAGW,KAAK,IAAK;IACZ,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAC9B,CAAC,CACF;EAED;IAAA;IACE;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;MAAA,wBACE;QAAA,UACGpB,CAAC,CAAC,gBAAgB;MAAC;QAAA;QAAA;QAAA;MAAA,QACjB,eACL;QAAA,WAAM,oBACc,EAACE,GAAG;MAAA;QAAA;QAAA;QAAA;MAAA,QACjB;IAAA;MAAA;MAAA;MAAA;IAAA;EACH;AAEV,CAAC;AAAC,GArDIN,GAAG;EAAA,QACMR,WAAW,EACJO,cAAc;AAAA;AAAA,KAF9BC,GAAG;AAuDT,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}