{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    products: [],\n    quantity: 0,\n    totalPrice: 0\n  },\n  reducers: {\n    addProduct: (state, action) => {\n      var _state$products;\n      if (((_state$products = state.products) === null || _state$products === void 0 ? void 0 : _state$products.length) > 0) {\n        for (let i = 0; i < state.products.length; i++) {\n          if (state.products[i]['_id'] === action.payload._id && state.products[i]['color'] === action.payload.color) {\n            state.products[i].quantity += action.payload.quantity;\n            state.totalPrice += action.payload.price * action.payload.quantity;\n            return;\n          }\n        }\n        state.quantity += 1;\n        state.products.push(action.payload);\n        state.totalPrice += action.payload.price * action.payload.quantity;\n      } else {\n        state.quantity += 1;\n        state.products.push(action.payload);\n        state.totalPrice += action.payload.price * action.payload.quantity;\n      }\n    },\n    increaseProduct: (state, action) => {\n      if (state.products.length > 0) {\n        for (let i = 0; i < state.products.length; i++) {\n          if (state.products[i]['_id'] === action.payload._id && state.products[i]['color'] === action.payload.color) {\n            if (state.products[i].quantity < 10000) {\n              state.products[i].quantity += 100;\n              state.totalPrice += action.payload.price * 100;\n            }\n            return;\n          }\n        }\n      }\n    },\n    decreaseProduct: (state, action) => {\n      if (state.products.length > 0) {\n        for (let i = 0; i < state.products.length; i++) {\n          if (state.products[i]['_id'] === action.payload._id && state.products[i]['color'] === action.payload.color) {\n            if (state.products[i].quantity > 100) {\n              state.products[i].quantity -= 100;\n              state.totalPrice -= action.payload.price * 100;\n            }\n            return;\n          }\n        }\n      }\n    },\n    deleteProduct: (state, action) => {\n      console.log(state);\n      if (state.products.length > 0) {\n        for (let i = 0; i < state.products.length; i++) {\n          if (state.products[i]['_id'] === action.payload._id && state.products[i]['color'] === action.payload.color) {\n            state.totalPrice -= state.products[i].price * state.products[i].quantity;\n            state.products.splice(i, 1);\n            state.quantity -= 1;\n            return;\n          }\n        }\n      }\n    },\n    clearCart: state => {\n      state.products = [];\n      state.quantity = 0;\n      state.totalPrice = 0;\n    }\n  }\n});\nexport const {\n  addProduct,\n  increaseProduct,\n  decreaseProduct,\n  deleteProduct,\n  clearCart\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","cartSlice","name","initialState","products","quantity","totalPrice","reducers","addProduct","state","action","length","i","payload","_id","color","price","push","increaseProduct","decreaseProduct","deleteProduct","console","log","splice","clearCart","actions","reducer"],"sources":["D:/Work/vinogradnik/client/src/redux/cartRedux.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState: {\r\n        products: [],\r\n        quantity: 0,\r\n        totalPrice: 0\r\n    },\r\n    reducers: {\r\n        addProduct: (state, action) => {\r\n            if (state.products?.length > 0) {\r\n                for (let i = 0; i < state.products.length; i++) {\r\n                    if (state.products[i]['_id'] === action.payload._id && state.products[i]['color'] === action.payload.color) {\r\n                        state.products[i].quantity += action.payload.quantity;\r\n                        state.totalPrice += action.payload.price * action.payload.quantity;\r\n                        return\r\n                    } \r\n                }\r\n                state.quantity += 1;\r\n                state.products.push(action.payload);\r\n                state.totalPrice += action.payload.price * action.payload.quantity;               \r\n            } else {\r\n                state.quantity += 1;\r\n                state.products.push(action.payload);\r\n                state.totalPrice += action.payload.price * action.payload.quantity;\r\n            }\r\n        },\r\n        increaseProduct: (state, action) => {\r\n            if (state.products.length > 0) {\r\n                for (let i = 0; i < state.products.length; i++) {\r\n                    if (state.products[i]['_id'] === action.payload._id && state.products[i]['color'] === action.payload.color) {\r\n                        if (state.products[i].quantity < 10000) {\r\n                            state.products[i].quantity += 100;\r\n                            state.totalPrice += action.payload.price * 100;\r\n                        }\r\n                        return                        \r\n                    }\r\n                }\r\n            }\r\n        },\r\n        decreaseProduct: (state, action) => {\r\n            if (state.products.length > 0) {\r\n                for (let i = 0; i < state.products.length; i++) {\r\n                    if (state.products[i]['_id'] === action.payload._id && state.products[i]['color'] === action.payload.color) {\r\n                        if (state.products[i].quantity > 100) {\r\n                            state.products[i].quantity -= 100;\r\n                            state.totalPrice -= action.payload.price * 100;\r\n                        }\r\n                        return                        \r\n                    }\r\n                }\r\n            }\r\n        },\r\n        deleteProduct: (state, action) => {\r\n            console.log(state)\r\n            if (state.products.length > 0) {\r\n                for (let i = 0; i < state.products.length; i++) {\r\n                    if (state.products[i]['_id'] === action.payload._id && state.products[i]['color'] === action.payload.color) {\r\n                        state.totalPrice -= state.products[i].price*state.products[i].quantity;\r\n                        state.products.splice(i, 1);\r\n                        state.quantity -= 1;    \r\n                        return\r\n                    } \r\n                }        \r\n            }\r\n        },\r\n        clearCart: (state) => {\r\n            state.products = [];\r\n            state.quantity = 0;\r\n            state.totalPrice = 0;\r\n        }\r\n    },\r\n});\r\n\r\nexport const { addProduct, increaseProduct, decreaseProduct, deleteProduct, clearCart } = cartSlice.actions;\r\nexport default cartSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}