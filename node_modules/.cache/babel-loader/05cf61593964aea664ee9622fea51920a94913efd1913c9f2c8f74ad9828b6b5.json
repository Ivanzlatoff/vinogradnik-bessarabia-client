{"ast":null,"code":"var _localStorage;\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nlet TOKEN;\nif (!((_localStorage = localStorage) !== null && _localStorage !== void 0 && _localStorage.getItem(\"persist:root\"))) {\n  TOKEN = {};\n} else {\n  var _JSON$parse, _JSON$parse$currentUs, _JSON$parse2, _localStorage2;\n  TOKEN = (_JSON$parse = JSON.parse((_JSON$parse2 = JSON.parse((_localStorage2 = localStorage) === null || _localStorage2 === void 0 ? void 0 : _localStorage2.getItem(\"persist:root\"))) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.user)) === null || _JSON$parse === void 0 ? void 0 : (_JSON$parse$currentUs = _JSON$parse.currentUser) === null || _JSON$parse$currentUs === void 0 ? void 0 : _JSON$parse$currentUs.accessToken;\n}\nexport const apiSlice = createApi({\n  reducerPath: 'api',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'http://localhost:5000/api/',\n    prepareHeaders: headers => {\n      if (TOKEN) {\n        headers.set('token', `Bearer ${TOKEN}`);\n      }\n      ;\n      return headers;\n    }\n  }),\n  endpoints: builder => ({\n    getCart: builder.query({\n      query: userId => `carts/find/${userId}`\n    }),\n    createCart: builder.mutation({\n      query: newCart => ({\n        url: 'carts',\n        method: 'POST',\n        body: newCart\n      })\n    }),\n    updateCart: builder.mutation({\n      query: updatedCart => ({\n        url: `carts/${updatedCart.id}`,\n        method: 'PUT',\n        body: updatedCart\n      })\n    })\n  })\n});\nexport const {\n  useGetCartQuery,\n  useCreateCartMutation,\n  useUpdateCartMutation\n} = apiSlice;","map":{"version":3,"names":["createApi","fetchBaseQuery","TOKEN","localStorage","getItem","JSON","parse","user","currentUser","accessToken","apiSlice","reducerPath","baseQuery","baseUrl","prepareHeaders","headers","set","endpoints","builder","getCart","query","userId","createCart","mutation","newCart","url","method","body","updateCart","updatedCart","id","useGetCartQuery","useCreateCartMutation","useUpdateCartMutation"],"sources":["D:/Work/VB/client/src/redux/apiSlice.js"],"sourcesContent":["import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\n\r\n\r\nlet TOKEN\r\nif (!localStorage?.getItem(\"persist:root\")) {\r\n    TOKEN = {}\r\n} else {\r\n    TOKEN = JSON.parse(JSON.parse(localStorage?.getItem(\"persist:root\"))?.user)?.currentUser?.accessToken;\r\n}\r\n\r\nexport const apiSlice = createApi({\r\n    reducerPath: 'api',\r\n    baseQuery: fetchBaseQuery({ \r\n        baseUrl: 'http://localhost:5000/api/',\r\n        prepareHeaders: (headers) => {\r\n            if (TOKEN) {\r\n                headers.set('token', `Bearer ${TOKEN}`)\r\n            };\r\n            return headers\r\n        },\r\n    }),\r\n    endpoints: builder => ({\r\n        getCart: builder.query({\r\n            query: (userId) => `carts/find/${userId}`\r\n        }),\r\n        createCart: builder.mutation({\r\n            query: (newCart) => ({\r\n                url: 'carts',\r\n                method: 'POST',\r\n                body: newCart               \r\n            })\r\n        }),\r\n        updateCart: builder.mutation({\r\n            query: (updatedCart) => ({\r\n                url: `carts/${updatedCart.id}`,\r\n                method: 'PUT',\r\n                body: updatedCart\r\n            })\r\n        })\r\n    })\r\n});\r\n\r\nexport const { \r\n    useGetCartQuery,\r\n    useCreateCartMutation,\r\n    useUpdateCartMutation\r\n} = apiSlice;"],"mappings":";AAAA,SAASA,SAAS,EAAEC,cAAc,QAAQ,8BAA8B;AAGxE,IAAIC,KAAK;AACT,IAAI,mBAACC,YAAY,0CAAZ,cAAcC,OAAO,CAAC,cAAc,CAAC,GAAE;EACxCF,KAAK,GAAG,CAAC,CAAC;AACd,CAAC,MAAM;EAAA;EACHA,KAAK,kBAAGG,IAAI,CAACC,KAAK,iBAACD,IAAI,CAACC,KAAK,mBAACH,YAAY,mDAAZ,eAAcC,OAAO,CAAC,cAAc,CAAC,CAAC,iDAAjD,aAAmDG,IAAI,CAAC,yEAAnE,YAAqEC,WAAW,0DAAhF,sBAAkFC,WAAW;AACzG;AAEA,OAAO,MAAMC,QAAQ,GAAGV,SAAS,CAAC;EAC9BW,WAAW,EAAE,KAAK;EAClBC,SAAS,EAAEX,cAAc,CAAC;IACtBY,OAAO,EAAE,4BAA4B;IACrCC,cAAc,EAAGC,OAAO,IAAK;MACzB,IAAIb,KAAK,EAAE;QACPa,OAAO,CAACC,GAAG,CAAC,OAAO,EAAG,UAASd,KAAM,EAAC,CAAC;MAC3C;MAAC;MACD,OAAOa,OAAO;IAClB;EACJ,CAAC,CAAC;EACFE,SAAS,EAAEC,OAAO,KAAK;IACnBC,OAAO,EAAED,OAAO,CAACE,KAAK,CAAC;MACnBA,KAAK,EAAGC,MAAM,IAAM,cAAaA,MAAO;IAC5C,CAAC,CAAC;IACFC,UAAU,EAAEJ,OAAO,CAACK,QAAQ,CAAC;MACzBH,KAAK,EAAGI,OAAO,KAAM;QACjBC,GAAG,EAAE,OAAO;QACZC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEH;MACV,CAAC;IACL,CAAC,CAAC;IACFI,UAAU,EAAEV,OAAO,CAACK,QAAQ,CAAC;MACzBH,KAAK,EAAGS,WAAW,KAAM;QACrBJ,GAAG,EAAG,SAAQI,WAAW,CAACC,EAAG,EAAC;QAC9BJ,MAAM,EAAE,KAAK;QACbC,IAAI,EAAEE;MACV,CAAC;IACL,CAAC;EACL,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,MAAM;EACTE,eAAe;EACfC,qBAAqB;EACrBC;AACJ,CAAC,GAAGvB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}