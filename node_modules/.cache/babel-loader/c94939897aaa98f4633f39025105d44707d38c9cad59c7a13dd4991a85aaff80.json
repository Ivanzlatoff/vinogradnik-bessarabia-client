{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nconst parseJWT = token => {\n  try {\n    return JSON.parse(atob(token.split(\".\")[1]));\n  } catch (e) {\n    return null;\n  }\n};\nconst AuthVerify = props => {\n  _s();\n  let location = useLocation();\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    if (user) {\n      const decodedJWT = parseJWT(user.accessToken);\n      console.log(decodedJWT.exp * 1000 < Date.now());\n      if (decodedJWT.exp * 1000 < Date.now()) {\n        props.logOut();\n      }\n    }\n  }, [location, props]);\n  return;\n};\n_s(AuthVerify, \"BXcZrDMM76mmm4zA8/QV5UbMNXE=\", false, function () {\n  return [useLocation];\n});\n_c = AuthVerify;\nexport default AuthVerify;\nvar _c;\n$RefreshReg$(_c, \"AuthVerify\");","map":{"version":3,"names":["useEffect","useLocation","parseJWT","token","JSON","parse","atob","split","e","AuthVerify","props","location","user","localStorage","getItem","decodedJWT","accessToken","console","log","exp","Date","now","logOut"],"sources":["D:/Work/vinogradnik/client/src/lib/AuthVerify.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\n\r\nconst parseJWT = (token) => {\r\n    try {\r\n        return JSON.parse(atob(token.split(\".\")[1]));\r\n    } catch(e) {\r\n        return null;\r\n    }\r\n};\r\n\r\nconst AuthVerify = (props) => {\r\n    let location = useLocation();\r\n\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n        if (user) {\r\n            const decodedJWT = parseJWT(user.accessToken);\r\n            console.log(decodedJWT.exp * 1000 < Date.now())\r\n            if (decodedJWT.exp * 1000 < Date.now()) {\r\n                props.logOut();\r\n            }\r\n        }\r\n    }, [location, props]);\r\n\r\n    return;\r\n};\r\n\r\nexport default AuthVerify;"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,kBAAkB;AAG9C,MAAMC,QAAQ,GAAIC,KAAK,IAAK;EACxB,IAAI;IACA,OAAOC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACH,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChD,CAAC,CAAC,OAAMC,CAAC,EAAE;IACP,OAAO,IAAI;EACf;AACJ,CAAC;AAED,MAAMC,UAAU,GAAIC,KAAK,IAAK;EAAA;EAC1B,IAAIC,QAAQ,GAAGV,WAAW,EAAE;EAE5BD,SAAS,CAAC,MAAM;IACZ,MAAMY,IAAI,GAAGR,IAAI,CAACC,KAAK,CAACQ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IAErD,IAAIF,IAAI,EAAE;MACN,MAAMG,UAAU,GAAGb,QAAQ,CAACU,IAAI,CAACI,WAAW,CAAC;MAC7CC,OAAO,CAACC,GAAG,CAACH,UAAU,CAACI,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,EAAE,CAAC;MAC/C,IAAIN,UAAU,CAACI,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,EAAE,EAAE;QACpCX,KAAK,CAACY,MAAM,EAAE;MAClB;IACJ;EACJ,CAAC,EAAE,CAACX,QAAQ,EAAED,KAAK,CAAC,CAAC;EAErB;AACJ,CAAC;AAAC,GAhBID,UAAU;EAAA,QACGR,WAAW;AAAA;AAAA,KADxBQ,UAAU;AAkBhB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}