{"ast":null,"code":"import _objectSpread from\"D:/Work/vinogradnik/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Work/vinogradnik/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"D:/Work/vinogradnik/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8;import styled from\"styled-components\";import{mobile,mobileLarge,tablet,tabletSmall}from\"../responsive\";import{useState}from\"react\";import{login}from\"../redux/apiCalls\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import{useTranslation}from\"react-i18next\";import bcrypt from'bcryptjs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    width: 100vw;\\n    height: 100vh;\\n    background-image:  linear-gradient(\\n        rgba(255, 255, 255, 0.5), \\n        rgba(255, 255, 255, 0.5)\\n        ),\\n        url(\\\"https://firebasestorage.googleapis.com/v0/b/shop-80015.appspot.com/o/grape-icon.png?alt=media&token=edb90e89-ed75-4e1d-b172-d92fdaba92bb\\\");\\n    background-repeat: no-repeat;\\n    background-size: contain;\\n    background-position: 50% 0;\\n    background-color: lightgray;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    \",\"\\n\"])),tablet({backgroundSize:'cover'}));var Wrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    width: 25%;\\n    padding: 20px;\\n    background-color: lightgray;\\n    opacity: 0.9;\\n    \",\";\\n    \",\";\\n\"])),tablet({width:'50%',textAlign:'center'}),tabletSmall({width:'75%'}));var Form=styled.form(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-wrap: wrap;\\n    justify-content: space-between;\\n    \",\"\\n\"])),mobile({justifyContent:'center'}));var Title=styled.h1(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    font-size: 24px;\\n    font-weight: 300;\\n\"])));var Guest=styled.h4(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    font-size: 16px;\\n    fonr-weight: 900;\\n\"])));var Input=styled.input(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    margin: 10px 0;\\n    padding: 10px;\\n\"])));var Button=styled.button(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    border: none;\\n    padding: 15px 20px;\\n    background-color: teal;\\n    color: white;\\n    cursor: pointer;\\n    margin-bottom: 10px;\\n    &:hover {\\n        background-color: #4e8773;\\n    }\\n    &:disabled {\\n        cursor: not-allowed;\\n    };\\n    \",\"\\n\"])),mobileLarge({padding:'10px'}));var Error=styled.span(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n    color: red;\\n\"])));var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.user;}),isFetching=_useSelector.isFetching,error=_useSelector.error;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var salt=bcrypt.genSaltSync(10);var onSubmit=function onSubmit(data,e){e.preventDefault();var hashedPassword=bcrypt.hashSync(password,salt);login(dispatch,{username:username,hashedPassword:hashedPassword});};var _useTranslation=useTranslation([\"login\"]),t=_useTranslation.t;return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:t(\"sign_in\")}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Guest,{children:t(\"as_guest\")})}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({},register('username',{required:'This is required'})),{},{id:\"username\",placeholder:t(\"username\"),onChange:function onChange(e){return setUsername(e.target.value);}})),errors.username&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:t(\"check_username\")}),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({},register('password',{required:'This is required'})),{},{placeholder:t(\"password\"),type:\"password\",autoComplete:\"current-password\",onChange:function onChange(e){return setPassword(e.target.value);}})),errors.password&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:t(\"check_password\")}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:isFetching||errors.length>0||!username||!password,children:t(\"login\")}),error&&/*#__PURE__*/_jsx(Error,{children:t(\"wrong\")}),/*#__PURE__*/_jsx(Link,{style:{margin:\"5px 0px\",fontSize:\"12px\",textDecoration:\"underline\",cursor:\"pointer\"},children:t(\"not_remember_password\")}),/*#__PURE__*/_jsx(Link,{style:{margin:\"5px 0px\",fontSize:\"12px\",textDecoration:\"underline\",cursor:\"pointer\"},to:\"/register\",children:t(\"create_new\")})]})]})});};export default Login;","map":{"version":3,"names":["styled","mobile","mobileLarge","tablet","tabletSmall","useState","login","useDispatch","useSelector","Link","useForm","useTranslation","bcrypt","Container","div","backgroundSize","Wrapper","width","textAlign","Form","form","justifyContent","Title","h1","Guest","h4","Input","input","Button","button","padding","Error","span","Login","username","setUsername","password","setPassword","dispatch","state","user","isFetching","error","register","handleSubmit","errors","formState","salt","genSaltSync","onSubmit","data","e","preventDefault","hashedPassword","hashSync","t","required","target","value","color","length","margin","fontSize","textDecoration","cursor"],"sources":["D:/Work/vinogradnik/client/src/pages/Login.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\nimport { mobile, mobileLarge, tablet, tabletSmall } from \"../responsive\";\r\nimport { useState } from \"react\";\r\nimport { login } from \"../redux/apiCalls\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport bcrypt from 'bcryptjs';\r\n\r\nconst Container = styled.div`\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background-image:  linear-gradient(\r\n        rgba(255, 255, 255, 0.5), \r\n        rgba(255, 255, 255, 0.5)\r\n        ),\r\n        url(\"https://firebasestorage.googleapis.com/v0/b/shop-80015.appspot.com/o/grape-icon.png?alt=media&token=edb90e89-ed75-4e1d-b172-d92fdaba92bb\");\r\n    background-repeat: no-repeat;\r\n    background-size: contain;\r\n    background-position: 50% 0;\r\n    background-color: lightgray;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    ${tablet({\r\n        backgroundSize: 'cover'\r\n    })}\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n    width: 25%;\r\n    padding: 20px;\r\n    background-color: lightgray;\r\n    opacity: 0.9;\r\n    ${tablet({\r\n        width: '50%',\r\n        textAlign: 'center',       \r\n    })};\r\n    ${tabletSmall({\r\n        width: '75%'\r\n    })};\r\n`;\r\nconst Form = styled.form`\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    ${mobile({\r\n        justifyContent: 'center',\r\n    })}\r\n`;\r\n\r\nconst Title = styled.h1`\r\n    font-size: 24px;\r\n    font-weight: 300;\r\n`;\r\n\r\nconst Guest = styled.h4`\r\n    font-size: 16px;\r\n    fonr-weight: 900;\r\n`;\r\n\r\nconst Input = styled.input`\r\n    width: 100%;\r\n    margin: 10px 0;\r\n    padding: 10px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n    width: 100%;\r\n    border: none;\r\n    padding: 15px 20px;\r\n    background-color: teal;\r\n    color: white;\r\n    cursor: pointer;\r\n    margin-bottom: 10px;\r\n    &:hover {\r\n        background-color: #4e8773;\r\n    }\r\n    &:disabled {\r\n        cursor: not-allowed;\r\n    };\r\n    ${mobileLarge({\r\n        padding: '10px',\r\n    })}\r\n`;\r\n\r\nconst Error = styled.span`\r\n    color: red;\r\n`;\r\n\r\nconst Login = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const dispatch = useDispatch();\r\n    const { isFetching, error } = useSelector((state) => state.user);\r\n    const { register, handleSubmit, formState: { errors } } = useForm();\r\n    const salt = bcrypt.genSaltSync(10);\r\n\r\n    const onSubmit = (data, e) => {\r\n        e.preventDefault();\r\n        const hashedPassword = bcrypt.hashSync(password, salt)\r\n        login(dispatch, { username, hashedPassword });\r\n    };  \r\n\r\n    const { t } = useTranslation([\"login\"]);\r\n\r\n  return (\r\n    <Container>\r\n      <Wrapper>\r\n        <Title>{t(\"sign_in\")}</Title>\r\n        <Link to=\"/\">\r\n            <Guest>{t(\"as_guest\")}</Guest>\r\n        </Link>\r\n        <Form onSubmit={handleSubmit(onSubmit)}>\r\n            <Input \r\n                {...register('username', { \r\n                    required: 'This is required',\r\n                })}  \r\n                id=\"username\"               \r\n                placeholder={t(\"username\")} \r\n                onChange={(e)=>setUsername(e.target.value)}\r\n            />\r\n            {errors.username && <p style={{ color: 'red' }}>{t(\"check_username\")}</p>}\r\n            <Input \r\n                {...register('password', { \r\n                    required: 'This is required',\r\n                })} \r\n                placeholder={t(\"password\")} \r\n                type='password'\r\n                autoComplete=\"current-password\"\r\n                onChange={(e)=>setPassword(e.target.value)}\r\n            />\r\n            {errors.password && <p style={{ color: 'red' }}>{t(\"check_password\")}</p>}\r\n            <Button type=\"submit\" disabled={isFetching || errors.length > 0 || !username || !password}>{t(\"login\")}</Button>\r\n            {error && <Error>{t(\"wrong\")}</Error>}\r\n            <Link\r\n                style={{\r\n                    margin: \"5px 0px\",\r\n                    fontSize: \"12px\",\r\n                    textDecoration: \"underline\",\r\n                    cursor: \"pointer\",\r\n                }}\r\n            >\r\n                {t(\"not_remember_password\")}\r\n            </Link>\r\n            <Link \r\n                style={{\r\n                    margin: \"5px 0px\",\r\n                    fontSize: \"12px\",\r\n                    textDecoration: \"underline\",\r\n                    cursor: \"pointer\",\r\n                }}\r\n                to=\"/register\"\r\n            >\r\n                {t(\"create_new\")}\r\n            </Link>\r\n        </Form>\r\n      </Wrapper>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Login\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}